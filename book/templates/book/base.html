{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}LogBook - Shift Tracker{% endblock %}</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Outfit:wght@400;600;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="{% static 'book/css/style.css' %}">
    {% block extra_head %}{% endblock %}
</head>

<body>
    <!-- Global Loader -->
    <div id="global-loader" class="loader-overlay">
        <div class="spinner"></div>
    </div>

    {% block navigation %}
    <header class="main-header">
        <div class="header-container">
            <div class="logo-section">
                <img src="{% static 'book/images/logo.png' %}" alt="LogBook Logo" style="height: 32px; width: auto;">
                <span class="logo-text">LogBook</span>
            </div>

            <!-- Desktop Nav -->
            <nav class="header-nav desktop-only">
                <button class="btn btn-pill" id="summary-btn">Summary</button>
                <form action="{% url 'logout' %}" method="post" style="display: inline;">
                    {% csrf_token %}
                    <button type="submit" class="btn btn-pill btn-dark">Sign Out</button>
                </form>
            </nav>

            <!-- Mobile Menu Toggle -->
            <button class="mobile-menu-toggle mobile-only" id="menu-toggle" aria-label="Toggle menu">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
    </header>

    <!-- Mobile Side Nav -->
    <div class="mobile-nav-overlay" id="nav-overlay"></div>
    <div class="mobile-side-nav" id="side-nav">
        <div class="mobile-nav-content">
            <h2 class="logo-text" style="margin-bottom: 2rem;">Menu</h2>
            <button class="btn btn-pill" id="mobile-summary-btn">Summary</button>
            <form action="{% url 'logout' %}" method="post">
                {% csrf_token %}
                <button type="submit" class="btn btn-pill btn-dark" style="width: 100%;">Sign Out</button>
            </form>
        </div>
    </div>
    {% endblock %}

    <main class="main-content">
        {% block content %}{% endblock %}
    </main>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const menuToggle = document.getElementById('menu-toggle');
            const sideNav = document.getElementById('side-nav');
            const navOverlay = document.getElementById('nav-overlay');

            if (menuToggle) {
                menuToggle.addEventListener('click', () => {
                    sideNav.classList.toggle('active');
                    navOverlay.classList.toggle('active');
                    menuToggle.classList.toggle('open');
                });
            }

            if (navOverlay) {
                navOverlay.addEventListener('click', () => {
                    sideNav.classList.remove('active');
                    navOverlay.classList.remove('active');
                    menuToggle.classList.remove('open');
                });
            }
        });
    </script>
    {% block extra_js %}{% endblock %}
</body>

</html>